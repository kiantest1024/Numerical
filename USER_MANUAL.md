# @numericalTools 用户手册

## 📖 目录
1. [快速开始](#快速开始)
2. [游戏配置](#游戏配置)
3. [运行模拟](#运行模拟)
4. [结果分析](#结果分析)
5. [报告管理](#报告管理)
6. [常见问题](#常见问题)
7. [最佳实践](#最佳实践)

## 🚀 快速开始

### 系统要求
- **操作系统**: Windows 10+, macOS 10.15+, Ubuntu 18.04+
- **内存**: 最少4GB，推荐8GB+
- **存储**: 最少2GB可用空间
- **网络**: 用于下载依赖和访问Web界面

### 启动服务

#### 方法1: Docker部署（推荐）
```bash
# 1. 克隆项目
git clone <repository-url>
cd numericalTools

# 2. 启动服务
docker-compose up -d

# 3. 访问应用
# 前端: http://localhost:3000
# 后端API: http://localhost:8001
```

#### 方法2: 本地开发
```bash
# 后端启动
cd numericalTools/backend
pip install -r requirements.txt
python run.py

# 前端启动（新终端）
cd numericalTools/frontend
npm install
npm start
```

### 首次使用
1. 打开浏览器访问 http://localhost:3000
2. 查看首页概览和功能介绍
3. 点击"配置游戏"开始设置第一个游戏

## 🎮 游戏配置

### 配置步骤

#### 1. 选择游戏类型
- **彩票**: 数字选择类游戏（如42选6）
- **刮刮乐**: 即开型彩票游戏
- **老虎机**: 转轮类游戏
- **自定义**: 完全自定义的游戏类型

#### 2. 基础设置
```
游戏名称: 输入描述性名称
数字范围: 设置可选数字的最小值和最大值
选择数量: 玩家需要选择的数字个数
单注价格: 每注投注的价格
```

#### 3. 奖级配置
每个奖级需要设置：
- **等级**: 奖级编号（1为最高奖级）
- **名称**: 奖级名称（如"一等奖"）
- **匹配条件**: 需要匹配的数字个数
- **奖金设置**: 
  - 固定奖金：设置固定金额
  - 奖池比例：从奖池中分配（通常用于最高奖级）

#### 4. 奖池设置（可选）
- **启用奖池**: 是否使用Jackpot机制
- **初始金额**: 奖池起始金额
- **注入比例**: 每注投注进入奖池的比例
- **返还比例**: 奖池返还给玩家的比例

#### 5. 模拟参数
- **模拟轮数**: 要运行的游戏轮数（建议1000-10000）
- **玩家数范围**: 每轮参与的玩家数量范围
- **投注数范围**: 每个玩家的投注数量范围
- **随机种子**: 可选，用于重现相同的模拟结果

### 配置模板
系统提供预设模板：
- **42选6彩票**: 经典彩票游戏模板
- **37选2彩票**: 简单彩票游戏模板
- **自定义游戏**: 空白模板，完全自定义

### 配置验证
保存前系统会自动验证：
- 数字范围的合理性
- 奖级设置的一致性
- 奖池配置的有效性
- 模拟参数的可行性

## 🏃 运行模拟

### 启动模拟

#### 1. 选择配置
- 从下拉列表中选择已保存的游戏配置
- 可以查看配置的基本信息和参数

#### 2. 启动模拟
- 点击"启动模拟"按钮
- 系统会分配唯一的模拟ID
- 模拟在后台异步运行

#### 3. 监控进度
实时显示：
- **当前轮次**: 已完成的轮数
- **进度百分比**: 完成进度
- **已用时间**: 从开始到现在的耗时
- **预计剩余**: 估算的剩余时间

### 模拟控制
- **停止模拟**: 可以随时停止正在运行的模拟
- **查看状态**: 实时更新模拟状态和进度
- **错误处理**: 自动处理和显示错误信息

### 性能建议
- **小规模测试**: 首次使用建议100-1000轮
- **中等规模**: 日常使用1000-10000轮
- **大规模**: 正式验证10000-100000轮
- **超大规模**: 特殊需求100000+轮（需要更多时间）

## 📊 结果分析

### 汇总统计
模拟完成后可查看：
- **总轮数**: 实际完成的模拟轮数
- **总投注金额**: 所有投注的总金额
- **总派奖金额**: 所有奖金的总金额
- **平均RTP**: 平均返奖率
- **头奖中出次数**: 最高奖级的中奖次数
- **奖池变化**: 初始和最终奖池金额

### 奖级分析
详细的奖级统计：
- **中奖人数**: 每个奖级的中奖人数
- **总奖金**: 每个奖级的总奖金金额
- **中奖概率**: 理论和实际中奖概率对比

### 可视化图表
- **RTP趋势图**: 显示RTP随轮次的变化
- **奖级分布图**: 各奖级中奖人数分布
- **奖池变化图**: 奖池金额随时间的变化
- **概率对比图**: 理论vs实际概率对比

### 数据导出
支持多种格式：
- **在线查看**: 直接在浏览器中查看
- **HTML报告**: 包含图表的完整报告
- **Excel文件**: 数据表格，便于进一步分析
- **JSON数据**: 原始数据，便于程序处理

## 📄 报告管理

### 报告类型

#### HTML报告
- **特点**: 包含完整图表和样式
- **用途**: 展示和分享结果
- **优势**: 可直接在浏览器中查看

#### Excel报告
- **特点**: 数据表格格式
- **用途**: 数据分析和计算
- **优势**: 支持公式和进一步处理

#### JSON报告
- **特点**: 结构化数据格式
- **用途**: 程序集成和自动化
- **优势**: 机器可读，便于处理

### 报告内容
每个报告包含：
1. **基本信息**: 模拟ID、游戏名称、时间等
2. **配置参数**: 游戏规则和模拟设置
3. **汇总统计**: 关键指标和总体结果
4. **详细数据**: 各轮次和奖级的详细数据
5. **可视化图表**: 趋势图和分布图
6. **分析结论**: 自动生成的分析摘要

### 报告管理
- **查看历史**: 浏览所有历史模拟记录
- **批量下载**: 支持批量导出报告
- **删除清理**: 清理不需要的历史记录
- **搜索过滤**: 按时间、状态等条件筛选

## ❓ 常见问题

### Q1: 模拟运行很慢怎么办？
**A**: 
- 减少模拟轮数进行测试
- 检查系统资源使用情况
- 考虑使用更强的硬件配置
- 参考性能优化指南

### Q2: 模拟结果不符合预期？
**A**:
- 检查游戏配置是否正确
- 验证奖级设置和概率计算
- 增加模拟轮数提高准确性
- 对比理论值和实际值

### Q3: 无法访问Web界面？
**A**:
- 检查服务是否正常启动
- 确认端口没有被占用
- 检查防火墙设置
- 查看浏览器控制台错误

### Q4: 配置保存失败？
**A**:
- 检查所有必填字段
- 验证数值范围的合理性
- 确保奖级配置的一致性
- 查看错误提示信息

### Q5: 报告下载失败？
**A**:
- 确认模拟已完成
- 检查浏览器下载设置
- 尝试不同的报告格式
- 清理浏览器缓存

## 💡 最佳实践

### 配置设计
1. **从简单开始**: 先用简单配置测试
2. **逐步复杂化**: 确认基础功能后增加复杂性
3. **参数合理性**: 确保参数设置符合实际情况
4. **文档记录**: 记录重要配置的设计思路

### 模拟运行
1. **分阶段测试**: 小规模→中规模→大规模
2. **多次验证**: 重要结果进行多次模拟验证
3. **对比分析**: 对比不同配置的结果差异
4. **性能监控**: 关注系统资源使用情况

### 结果分析
1. **关注趋势**: 重点分析RTP和概率趋势
2. **异常检查**: 识别和分析异常数据点
3. **理论对比**: 对比理论值和实际值
4. **文档记录**: 记录重要发现和结论

### 数据管理
1. **定期备份**: 备份重要的配置和结果
2. **版本控制**: 记录配置的版本变化
3. **清理维护**: 定期清理不需要的数据
4. **安全保护**: 保护敏感的配置信息

---

如有其他问题，请参考API文档或联系技术支持。
